import{_ as s,c as n,o as a,a as l}from"./app.987cfbbf.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"Git 工程规范","slug":"git-工程规范","link":"#git-工程规范","children":[{"level":3,"title":"Git flow 规范","slug":"git-flow-规范","link":"#git-flow-规范","children":[]},{"level":3,"title":"Git commit 规范","slug":"git-commit-规范","link":"#git-commit-规范","children":[]}]},{"level":2,"title":"Git Hooks","slug":"git-hooks","link":"#git-hooks","children":[{"level":3,"title":"git hooks","slug":"git-hooks-1","link":"#git-hooks-1","children":[]},{"level":3,"title":"工程实践","slug":"工程实践","link":"#工程实践","children":[]},{"level":3,"title":"Git Hooks 拓展学习资料","slug":"git-hooks-拓展学习资料","link":"#git-hooks-拓展学习资料","children":[]}]}],"relativePath":"front-end/engineering/git.md"}'),p={name:"front-end/engineering/git.md"},e=l(`<h2 id="git-工程规范" tabindex="-1">Git 工程规范 <a class="header-anchor" href="#git-工程规范" aria-hidden="true">#</a></h2><p><a href="http://git-scm.com/book/zh/v2" target="_blank" rel="noreferrer">git 文档</a></p><p><a href="https://docs.npmjs.com/cli/v8/configuring-npm/package-json#config" target="_blank" rel="noreferrer">package.json 配置查询</a></p><h3 id="git-flow-规范" tabindex="-1">Git flow 规范 <a class="header-anchor" href="#git-flow-规范" aria-hidden="true">#</a></h3><p>在工作中避免不了多人协作，协作避免不了有一个规范的流程，让大家有效的去合作；让项目仅仅有条的发展下去；<code>git flow</code>是最早诞生， 并得到广泛采用的一种工作流，git flow 采用的是功能驱动式开发。</p><p>功能驱动式开发（Feature-driven development，简称 FDD）</p><ul><li><p>长期分支</p><ul><li>master - 主分支</li><li>develop - 开发分支</li></ul></li><li><p>短期分支</p><ul><li>feature - 功能分支</li><li>hotfix - 补丁分支</li><li>release - 预发分支</li></ul></li></ul><table><thead><tr><th style="text-align:center;">分支</th><th style="text-align:center;">详细介绍</th></tr></thead><tbody><tr><td style="text-align:center;">master</td><td style="text-align:center;">产品分支：只能从其他分支合并内容，不能在这个分支直接修改。合并到 master 上的 commit 只能来自 release 分支或 hotfix 分支</td></tr><tr><td style="text-align:center;">develop</td><td style="text-align:center;">开发主干分支：基于 master 的 tag 建立，主要用来暂时保存开发完成而又未发布的 feature 分支内容，以及 release 和 hotfix 的补充内容</td></tr><tr><td style="text-align:center;">feature</td><td style="text-align:center;">功能分支：一般一个新功能对应一个功能分支，从而和已经完成的功能隔离开来，而且只有在新功能完成开发的情况下，其对应的 feature 分支才会合并到主开发分支（develop 分支）上</td></tr><tr><td style="text-align:center;">release</td><td style="text-align:center;">预发分支：当需要发布时，我们从 develop 分支创建一个 release 分支，然后这个 release 分支会发布到测试环境进行测试，如果发现问题就在这个分支直接进行修复。发布结束后，这个 release 分支会合并到 develop 和 master 分支，从而保证不会有代码丢失。</td></tr><tr><td style="text-align:center;">hotfix</td><td style="text-align:center;">补丁分支：主要用于紧急修复一些 bug，会从 master 分支上的某一个 tag 建立，修复结束后再合并到 develop 和 master 分支上</td></tr></tbody></table><h3 id="git-commit-规范" tabindex="-1">Git commit 规范 <a class="header-anchor" href="#git-commit-规范" aria-hidden="true">#</a></h3><h4 id="为什么要写好-git-commit" tabindex="-1">为什么要写好 Git Commit? <a class="header-anchor" href="#为什么要写好-git-commit" aria-hidden="true">#</a></h4><ul><li>提供更多的历史信息，方便快速浏览</li><li>可以过滤某些 commit（比如文档改动），方便快速查找信息</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;"># 过滤日志信息</span></span>
<span class="line"><span style="color:#A6ACCD;">  git log HEAD --pretty=format:%s --grep 关键字</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>可以直接从 commit 生成 changelog</li></ul><h4 id="如何优雅地写好-git-commit" tabindex="-1">如何优雅地写好 Git Commit <a class="header-anchor" href="#如何优雅地写好-git-commit" aria-hidden="true">#</a></h4><p>业界使用比较广泛的是 Angular 规范</p><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">scope</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">):</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">subject</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">BLANK</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">LINE</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">BLANK</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">LINE</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">footer</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>标题行：必填，描述主要修改类型和内容</li><li>主要内容：描述为什么修改，做什么样的修改，以及开发的思路等等</li><li>页脚注释：放 Breaking Changes 或 Closed Issuses</li></ul><p>type | commit 类型</p><table><thead><tr><th style="text-align:center;">类型</th><th style="text-align:center;">详细介绍</th></tr></thead><tbody><tr><td style="text-align:center;">feat</td><td style="text-align:center;">新功能、新特性</td></tr><tr><td style="text-align:center;">fix</td><td style="text-align:center;">bugfix，修改问题</td></tr><tr><td style="text-align:center;">refactor</td><td style="text-align:center;">代码重构</td></tr><tr><td style="text-align:center;">docs</td><td style="text-align:center;">文档修改</td></tr><tr><td style="text-align:center;">style</td><td style="text-align:center;">代码格式修改，注意不是 css 修改</td></tr><tr><td style="text-align:center;">test</td><td style="text-align:center;">测试用例修改</td></tr><tr><td style="text-align:center;">chore</td><td style="text-align:center;">其他修改，比如构建，依赖管理</td></tr></tbody></table><p>scope | commit 影响的范围 比如：route、component、utils、build.....</p><ul><li>subject:commit 的概述，建议符合 50/72 formatting</li><li>body：commit 具体修改内容，可以分为多行，建议符合 50/72 formatting</li><li>footer：一些备注，通常是 BREAKING CHANGE 或 修改的 bug 链接</li></ul><h4 id="利用插件-commitizen" tabindex="-1">利用插件（commitizen） <a class="header-anchor" href="#利用插件-commitizen" aria-hidden="true">#</a></h4><p>利用 commitizen，提交规范的 commit。</p><p><a href="https://docs.npmjs.com/cli/v8/configuring-npm/package-json#config" target="_blank" rel="noreferrer">package.json 配置查询</a></p><ul><li>commitizen 用于提示用户输入或选择，生成规范的 commit</li><li>cz-conventional-changelog 用于生成 changelog</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># 1. 下载cz-conventional-changelog changelog插件</span></span>
<span class="line"><span style="color:#A6ACCD;">npm install -g commitizen cz-conventional-changelog</span></span>
<span class="line"><span style="color:#676E95;"># 2. package.json 配置</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;"># 以后提交commit 直接执行npm run commit</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">commit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">git-cz</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;"># config用来设置一些项目不怎么变化的项目配置，用户用的时候可以使用如下用法：p<wbr>rocess.env.npm_package_config_commitizen</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">commitizen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./node_modules/cz-conventional-changelog</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 也可以使用以下配置，配置全局变量</span></span>
<span class="line"><span style="color:#676E95;"># 命令行中输入以下命令，配置到czrc目录下,也可以用vim编辑~/.czrc添加到文件中去{ &quot;path&quot;: &quot;cz-conventional-changelog&quot;}</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{ &quot;path&quot;: &quot;cz-conventional-changelog&quot;}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/.czrc</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>自定义文档格式,commit 用中文去写（扩展）</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># 1.下载</span></span>
<span class="line"><span style="color:#A6ACCD;">npm install -g cz-customizable</span></span>
<span class="line"><span style="color:#676E95;"># 2. package.json 配置</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">commitizen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node_modules/cz-customizable</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cz-customizable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./cz.config.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 也可以使用以下配置，配置全局变量</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{ &quot;path&quot;: &quot;cz-customizable&quot;}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/.czrc</span></span>
<span class="line"><span style="color:#676E95;"># echo添加或vim编辑添加</span></span>
<span class="line"><span style="color:#A6ACCD;">vim .czrc</span></span>
<span class="line"><span style="color:#676E95;"># 添加配置 { &quot;path&quot;: &quot;cz-customizable&quot;}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 3.创建配置文件</span></span>
<span class="line"><span style="color:#A6ACCD;">touch ./cz.config.js</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>cz.config.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//可选类型</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">types</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">feat</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">feat:   新功能</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fix</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fix:   修复</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">docs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">docs:   文档变更</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">style</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">style:   代码格式(不影响代码运行的变动)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">refactor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">refactor:重构(既不是增加feature)，也不是修复bug</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">perf</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">perf:   性能优化</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test:   增加测试</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">chore</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">chore:   构建过程或辅助功能的变动</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">revert</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">revert:   回退</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">build</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">build:   打包</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">revert</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">revert:   回退</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//消息步骤</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">messages</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">请选择提交类型</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">customScope</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">请输入修改范围(可选)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">subject</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">请简要描述提交(必填)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">请输入详细描述(可选)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">footer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">请输入要关闭的issue(可选)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">confirmCommit</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">确认以上信息提交?(y/n)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//跳过问题</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">skipQuestion</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">body</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">footer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//subject文字长度默认是</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">subjectLimit</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">72</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>gitmoji(趣味图标)（扩展）</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">npm i -g gitmoji-cli</span></span>
<span class="line"><span style="color:#A6ACCD;">gitmoji -c </span><span style="color:#676E95;"># git commit 提交</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="git-hooks" tabindex="-1">Git Hooks <a class="header-anchor" href="#git-hooks" aria-hidden="true">#</a></h2><h3 id="git-hooks-1" tabindex="-1">git hooks <a class="header-anchor" href="#git-hooks-1" aria-hidden="true">#</a></h3><p>Git 钩子（hooks）是在 Git 仓库中特定事件（certain points）触发后被调用的脚本</p><p>可以用 git init 初始化 git 文件，在.git/hooks 下有各种钩子模版，可以用例如 less prepare-commit-msg.sample 查看文件，里面是一段执行脚本。</p><ul><li>客户端钩子-&gt; 由诸如提交和合并这样的操作所调用</li><li>服务端钩子-&gt; 作用于诸如接收被推送的提交这样的联网操作</li></ul><h4 id="客户端-hooks" tabindex="-1">客户端 Hooks <a class="header-anchor" href="#客户端-hooks" aria-hidden="true">#</a></h4><table><thead><tr><th style="text-align:center;">类型</th><th style="text-align:center;">详细介绍</th></tr></thead><tbody><tr><td style="text-align:center;">prepare-commit-msg</td><td style="text-align:center;">commit message 编辑器呼起前 default commit message 创建后触发，常用于生成默认的标准化的提交说明</td></tr><tr><td style="text-align:center;">commit-msg</td><td style="text-align:center;">开发者编写完并确认 commit message 后触发，常用于校验提交说明是否标准</td></tr><tr><td style="text-align:center;">post-commit</td><td style="text-align:center;">整个 git commit 完成后触发，常用于邮件通知、提醒</td></tr><tr><td style="text-align:center;">applypatch-msg</td><td style="text-align:center;">git am 提取补丁并 应用于当前分支后，准备提交触发，常用于执行测试用例或检查缓冲区代码</td></tr><tr><td style="text-align:center;">pre-applypatch</td><td style="text-align:center;">git am 提交后触发，常用于通知、补丁、邮件推送回复（此钩子不能停止 git am 过程）</td></tr><tr><td style="text-align:center;">pre-rebase</td><td style="text-align:center;">执行 git rebase 命令时触发</td></tr><tr><td style="text-align:center;">post-rewrite</td><td style="text-align:center;">执行会替换 commit 的命令时触发，比如 git rebase 或 git cimmit-amend</td></tr><tr><td style="text-align:center;">post-checkout</td><td style="text-align:center;">执行 git checkout 命令成功后触发，可用于生成特定文档，处理大二进制文件等</td></tr><tr><td style="text-align:center;">post-merge</td><td style="text-align:center;">成功完成一次 merge 行为后触发</td></tr><tr><td style="text-align:center;">pre-auto-gc</td><td style="text-align:center;">执行垃圾回收前触发</td></tr></tbody></table><h4 id="服务端-hooks" tabindex="-1">服务端 Hooks <a class="header-anchor" href="#服务端-hooks" aria-hidden="true">#</a></h4><table><thead><tr><th style="text-align:center;">类型</th><th style="text-align:center;">详细介绍</th></tr></thead><tbody><tr><td style="text-align:center;">pre-receive</td><td style="text-align:center;">当服务端收到一个 push 操作请求时触发，可用于检测 push 的内容</td></tr><tr><td style="text-align:center;">update</td><td style="text-align:center;">与 pre-receive 相似，但当一次 push 想更新多个分支时，pre-receive 只执行一次，而此钩子会为每一分支都执行一次</td></tr><tr><td style="text-align:center;">post-receive</td><td style="text-align:center;">当整个 push 操作完成时触发，常用于服务侧同步、通知</td></tr></tbody></table><h3 id="工程实践" tabindex="-1">工程实践 <a class="header-anchor" href="#工程实践" aria-hidden="true">#</a></h3><h4 id="husky" tabindex="-1">Husky <a class="header-anchor" href="#husky" aria-hidden="true">#</a></h4><p>用 node 实现的的快速安装 git hooks 的工具</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// npm install husky --save-dev</span></span>
<span class="line"><span style="color:#676E95;">// package.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">husky</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">hooks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">pre-commit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">npm test</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;">// ......</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>命令行 less .git/hooks/pre-commit 查看 pre-commit 文件，可以看见&quot;$(dirname &quot;$0&quot;)/husky.sh&quot;,然后可以查看 less .git/hooks/husky.sh</p><h4 id="link-staged" tabindex="-1">link-staged <a class="header-anchor" href="#link-staged" aria-hidden="true">#</a></h4><p>只会检测暂存区的文件，不会对所有的文件进行检测，也就是说我修改一个文件，只会检测当前这个文件</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;"># 安装代码检测工具</span></span>
<span class="line"><span style="color:#A6ACCD;"> npm install prettier eslint -D</span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;"># 安装lint-staged</span></span>
<span class="line"><span style="color:#A6ACCD;"> npx mrm lint-staged</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">gitHooks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">pre-commit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lint-staged</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">lint-staged</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">*.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eslint --cache --fix</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">*.{js,css,md}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">prettier --write</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="git-hooks-拓展学习资料" tabindex="-1">Git Hooks 拓展学习资料 <a class="header-anchor" href="#git-hooks-拓展学习资料" aria-hidden="true">#</a></h3><p>自定义 Git - Git 钩子：<a href="https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90" target="_blank" rel="noreferrer">https://git-scm.com/book/zh/v2/自定义-Git-Git-钩子</a></p><p>Husky：<a href="https://github.com/typicode/husky" target="_blank" rel="noreferrer">https://github.com/typicode/husky</a></p>`,53),o=[e];function t(r,c,D,i,y,F){return a(),n("div",null,o)}const A=s(p,[["render",t]]);export{u as __pageData,A as default};
